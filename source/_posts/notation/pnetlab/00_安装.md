---
title: PnetLab v6 的安装
date: 2024-04-05 22:30:40
tags: [pnetlab, ubuntu, switch, router, firewall]
categories: [运维]  
---

`PnetLab` 是一个非常有用的网工实验环境，包含有非常丰富的硬件资源。但是官网提供的安装教程过于陈旧，于是这里将电报群中最新的安装方法记录下。  

<!--more-->  

## 安装PnetLab v6  
> 推荐在VMware 或者VirtualBox 虚拟机中安装，虽然直接在裸机上安装也可以，但是在虚拟机中可以快速地做快照和恢复。  
> 在VMware 中运行虚拟机时，要注意勾选[VT-x 虚拟化支持](https://www.pnetlab.com/pages/documentation?slug=install-PNETlab)。否则基于QEMU 的镜像在启动后会闪退。  

```bash  
# 首先安装`Ubuntu 20.04`,启用`root` 账户密码：
sudo passwd root  

# 切换到root 账户  
su  
# 安装Pnetlab  
curl -sL https://labhub.eu.org/api/raw/?path=/UNETLAB%20I/upgrades_pnetlab/Focal/install_pnetlab_v6.sh | bash
```


安装后重启电脑，重启后进入`root` 默认密码是`pnet`，进入后可以保持默认配置。可以通过`http://ip` 访问服务，选择离线模式，账号`admin`，密码`pnet`。   

## 安装IShare2  
> 安装ishare2-cli, webgui 需要安装python3.11  

```bash  
# 切换到root 账户  
su  

# 移除以前（可能）存在的安装：
rm -rf /opt/ishare2/ && rm -rf /usr/sbin/ishare2
# 安装IShare2    
wget -O /usr/sbin/ishare2 https://raw.githubusercontent.com/ishare2-org/ishare2-cli/main/ishare2 && chmod +x /usr/sbin/ishare2 && ishare2
```

### 使用ishare2-cli   
> 以下命令在root 用户下运行：  

一般安装后会自动修复权限，如果没有的话需要在PNetlab 的Web 界面（系统设置），手动修复。  
```bash  
ishare2 search forti  # 搜索镜像  

ishare2 pull qemu 384  # 根据类型，id 拉取镜像

ishre2 upgrade # 此命令可以用来升级pnetlab、ishare2 和ishare2 gui  
```

### 安装inshare2-gui  

Ubuntu 官方并没有提供Python 3.11 的安装包，需要通过第三方库安装。但是最好还是通过cli 安装，因为能够看到进度。通过Web 页面安装看不到进度条。    

```bash  
add-apt-repository ppa:deadsnakes/ppa -y  # 添加三方库  

apt update  

apt install python3.11  

ishare2 gui install # 但是不好用
```  
还是通过源码安装比较好一些：<https://github.com/ishare2-org/ishare2-web-gui>



