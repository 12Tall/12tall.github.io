(function(){'use strict';function h({delay:f,leading:c},o){let r,l=true,i=(...u)=>{l?(clearTimeout(r),r=setTimeout(()=>{l&&o(...u),r=void 0;},f),c&&(o(...u),c=false)):o(...u);};return i.isPending=()=>r!==void 0,i.cancel=()=>{l=false;},i.flush=(...u)=>o(...u),i}window.hexoMarkmap=(()=>{let{Markmap:f,Toolbar:c,deriveOptions:o}=window.markmap,r={observer:new ResizeObserver(e=>{e.forEach(t=>{let n=r.listeners.get(t.target);n&&n();});}),listeners:new Map,observe(e,t){!(e instanceof Element)||typeof t!="function"||this.listeners.has(e)||(this.listeners.set(e,t),this.observer.observe(e));},destroyAll(){this.listeners.forEach((e,t)=>{this.observer.unobserve(t);}),this.listeners.clear();}},l=(e,{fullscreenElement:t})=>{let n=c.create(e);return n.setBrand(false),n.register({id:"fullScreen",title:"Full Screen View",content:c.icon("M4 9v-4h4v2h-2v2zM4 11v4h4v-2h-2v-2zM16 9v-4h-4v2h2v2zM16 11v4h-4v-2h2v-2z"),onClick:()=>document.fullscreenElement?document.exitFullscreen():t.requestFullscreen()}),n.setItems([...n.items,"fullScreen"]),t.addEventListener("fullscreenchange",()=>{let s=document.fullscreenElement===t;t.classList.toggle("fullscreen",s);}),n.el},i=(e,t)=>{let n=e.svg.node();if(t){let{y2:s}=e.state.rect;n.style.height=String(s);}e.fit();};return {init:()=>{document.querySelectorAll(".markmap-wrap").forEach(e=>{if(e.children.length<2)return;let[t,n]=Array.from(e.children,d=>{try{return JSON.parse(d.innerHTML)}catch{return console.warn("Failed to parse JSON:",d.innerHTML),null}});if(!t||!n)return;let s=document.createElementNS("http://www.w3.org/2000/svg","svg");e.replaceChildren(s);let a=f.create(s,o(n),t);e.appendChild(l(a,{fullscreenElement:e}));let p=!e.style.height;r.observe(e,h({delay:100},()=>i(a,p)));});},resize:r}})();window.hexoMarkmap.init();
})();