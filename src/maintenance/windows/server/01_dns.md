---
title: DNS 服务器  
date: 2022-08-03
timeLine: true
sidebar: false  
icon: linux
category:  
    - 笔记  
    - 运维      
tag:   
    - windows  
    - server  
    - dns  
---  

# DNS 服务器   
## 安装DNS 服务器 
### 必要条件  
> 1. 固定的IP 地址  
> 2. 安装并运行DNS 服务  
> 3. 有区域文件，配置转发器或配置根提示  

### 安装服务  
1. 配置本机IP 为静态  
2. 服务器管理器 --> 添加角色和功能 --> 基于角色或基于功能的安装 --> 从服务器池中选择服务器 --> DNS 服务器 --> 保持默认直到安装完成  

## 管理DNS  
### 添加正向查找区域
1. 开始 --> 管理工具 --> DNS  
2. 右击服务器名称 --> 新建区域  
   - 区域类型 --> 主要区域  
   - 正向查找区域  
   - 区域名称 --> `12tall.com`  
   - 创建新的DNS 配置文件  
   - 不允许动态更新  


### 添加反向查找区域  
与添加正向查找区域类似，注意不同点：  
1. 开始 --> 管理工具 --> DNS  
2. 右击服务器名称 --> 新建区域  
   - 区域类型 --> 主要区域  
   - **反向查找区域**  
   - **IPv4 反向查找区域**  
   - **网络ID** 输入要查询的网段  
   - 保持默认直到完成  

### 创建资源记录  
#### 新建主机
A 记录通常指向一个IP 地址，AAAA 表示IPv6  
1. 在正向查找区域中选择`新建主机(A或AAAA)`  
2. 填入主机名和IP 地址  

#### 新建别名  
CNAME 将多个域名指向到同一个A 记录上，以便和A 记录保持一致
1. 在正向查找区域中选择`新建别名(CNAME)`  
2. 填写别名 --> 浏览(选择FQDN)  
3. 也可以自己填写FQDN  
  
### 新建子域  
1. 选择已经创建好的正向查找区域 --> 新建域 --> 输入域名：`sub`  
2. 在子域中新建主机：`www`。将会得到`www.sub.12tall.com` 的域名  

### 新建委派  
上级DNS不知道具体域名，但是他知道哪个下层DNS知道，于是委派下层DNS解析域名。委派需要两台DNS 服务器才行  
1. 新建委派 --> 选择委派的域`sub`  
2. 添加名称服务器 --> 解析 --> 默认至完成  

### 新建条件转发  
应该是两个DNS 服务器之间协作，但是没搞懂
1. 新建条件转发器  
2. 配置FQDN 和IP  

### 新建转发器  
转发器可以将不存在的记录转发至其他服务器  
1. 服务器 --> 属性 --> 转发器中配置  
2. 添加IP --> 确定。即可


## 参考资料  
1. [Windows server 2016搭建DNS服务](https://blog.51cto.com/14157628/2352022)  
2. [DNS服务——域名解析委派](https://www.cnblogs.com/kelamoyujuzhen/p/9530311.html)  
3. [DNS服务——域名解析转发 和 条件转发](https://www.cnblogs.com/kelamoyujuzhen/p/9526915.html)